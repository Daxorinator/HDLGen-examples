





Complete the following VHDL model, and output in a single formatted code box.


Do not remove any comments beginning with '-- ', i.e, only two dashes

For each line between -- Title section start and -- Title section end, improve the text formatting

For each line containing the prefix '---', generate VHDL code describing the logic, applying the following rules.
Remove the '--- '  prefix from the line.

For arithmetic operations, use type casting to support signal type requirements in ieee.numeric_std arithmetic functions.
For all +, -, *, / operations, ensure correct signal type conversion.

If a line includes a std_logic_vector signal as an array index, convert the signal to an integer index using "ieee.numeric_std" package to_integer(unsigned()).

Convert shift_left and shift_right function outputs to signal type std_logic_vector.
Only use ieee.numeric_std package shift_left or shift_right functions, and do not use sra, srl, sll, shift_right_arithmetic functions, introduced in IEEE VHDL-2008
If a line includes a >>> shift right arithmetic operation, use ieee.numeric_std package shift_right function, assuming signed data.

Use hexadecimal signal format where the number of bits in the assignment is a multiple of 4, extending the hex value to the exact width of the target signal.
Make assignment and equality check bit widths compatible.

Leave all labels unchanged.

For each line containing '_c:' in the label, generate a concurrent VHDL statement, do not generate a process statement, do not remove the label, and remove any occurrence of '-- Default assignment'

Remove all assignments in if or case statements which duplicate the default assignment.
Include null in others case statement if a default assignment is included in a case statement

For all case statements, include "when others => null;" before every occurrence of an "end case" statement.

Within all VHDL processes, do not remove the line containing '-- Default assignment', and place it immediately before the VHDL statements generated for lines containing prefix '--- '.

In assignments which include signals with one bit extension, e.g, (0 & CSUpr) or  (1 & CSUpr), use single quotes around the single bit value 0 or 1 and do not use double quotes "".
For example, generate ('0' & CSUpr) from VHDL (0 & CSUpr)

Do not remove any library statements, do not add any new library 'use' statements, to avoid conflicts with the ieee.numeric_std package functions.

Only use VHDL which is support by the IEEE VHDL-1987 standard.

In all VHDL processes, replace each conditional when else statement with a case statement or an if statement, without removing any signal state check, and not including any assignments which duplicate the assignment labelled '-- Default assignment'

For signal which have a digit boundary width, use hexadecimal format in constant assignments, with 'x' prefix before double quotation marks.

-- Title Section Start
-- Generated by HDLGen, Github https://github.com/HDLGen-ChatGPT/HDLGen-ChatGPT, on 30-August-2024 at 15:46

-- Component Name : RISCV_ALU
-- Title          : RV32I RISC-V Arithmetic Logic Unit (ALU)

-- Author(s)      : Sean Kelly, Daniel Szuflicki
-- Organisation   : University of Galway
-- Email          : s.kelly178@universityofgalway.ie, d.szuflicki1@universityofgalway.ie
-- Date           : 30/08/2024

-- Description
-- RISC-V Arithmetic Logic Unit (RISCV_ALU) 
-- 
-- Combinational logic component
-- Input signal selALUOp(3:0) selects ALU function.
-- 32-bit data inputs A, B
-- 32-bit data output ALUOut
-- Output signal branch, asserted when branch condition is true

-- entity signal dictionary
-- selALUOp	ALU control signal
-- A	ALU data input A
-- B	ALU data input B
-- ALUOut	ALU data output
-- branch	Asserted (h) for branch operation (selALOp(3:0) = 10-15, if 
-- branch condition check is true

-- internal signal dictionary
-- shamt	B(4:0)

-- Title Section End
-- library declarations
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;
use work.MainPackage.all;

-- entity declaration
entity RISCV_ALU is 
Port(
	selALUOp : in std_logic_vector(3 downto 0);
	A : in std_logic_vector(31 downto 0);
	B : in std_logic_vector(31 downto 0);
	ALUOut : out std_logic_vector(31 downto 0);
	branch : out std_logic
);
end entity RISCV_ALU;

architecture Combinational of RISCV_ALU is
-- Internal signal declarations
signal shamt : std_logic_vector(4 downto 0);

begin

ALUOutMux_p: process(selALUOp,A,B,shamt)
begin
	ALUOut <= (others => '0');-- Default assignment 
	shamt <= B(4 downto 0);-- Default assignment 
	
--- if selALUOp = '0' then ALUOut = signed(A) + signed(B),
---if selALUOp = '1' then ALUOut = signed(A) - signed(B),
---if selALUOp = 2 then ALUOut = A AND B,
---if selALUOp = 3 then ALUOut = A OR B,
---if selALUOp = 4 then ALUOut = A XOR B,
---if selALUOp = 5 then ALUOut = A << shamt,
---if selALUOp = 6 then ALUOut = A >>> shamt,
---if selALUOp = 7 then ALUOut = A >> shamt,
---if selALUOp = 8 and if signed(A) < signed(B) then ALUOut = '1',
---if selALUOp = 9 and if unsigned(A) < unsigned(B) then ALUOut = '1'
end process;

branchMux_p: process(selALUOp,A,B)
begin
	branch <= '0';-- Default assignment 
	
--- if selALUOp = "10" and if A = B then branch = '1',
---if selALUOp = "11" and if A != B then branch = '1',
---if selALUOp = 12 and if signed(A) < signed(B) then branch = '1',
---if selALUOp = 13 and if signed(A) >= signed(B) then branch = '1',
---if selALUOp = 14 and if unsigned(A) < unsigned(B) then branch = '1',
---if selALUOp = 15 and if unsigned(A) >= unsigned(B) then branch = '1'
end process;

end Combinational;